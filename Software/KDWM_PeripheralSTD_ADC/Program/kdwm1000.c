/*====================================================================================================*/
/*====================================================================================================*/
#include "drivers\stm32f4_system.h"
#include "drivers\stm32f4_adc.h"
#include "modules\module_serial.h"

#include "kdwm1000.h"
/*====================================================================================================*/
/*====================================================================================================*/
void KDWM_Init( void )
{
  SystemInit();
  HAL_InitTick();

  KDWM_GPIO_Config();
  KDWM_ADC1_Config();
  KDWM_UART1_Config(NULL);
}
/*====================================================================================================*/
/*====================================================================================================*/
void KDWM_Loop( void )
{
  uint16_t adc_ave[ADC_BUF_CHENNAL] = {0};

  while(1) {
    LED_G_Toggle();
    delay_ms(100);

    ADC_getAverage(adc_ave, ADC_BUF_SIZE);
    printf("AD = %5d, %5d, %5d\r\n", adc_ave[0], adc_ave[1], adc_ave[2]);
  }
}
/*====================================================================================================*/
/*====================================================================================================*/
