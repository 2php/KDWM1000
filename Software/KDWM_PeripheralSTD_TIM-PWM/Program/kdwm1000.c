/*====================================================================================================*/
/*====================================================================================================*/
#include "drivers\stm32f4_system.h"
#include "drivers\stm32f4_tim_pwm.h"

#include "kdwm1000.h"
/*====================================================================================================*/
/*====================================================================================================*/
void KDWM_Init( void )
{
  SystemInit();
  HAL_InitTick();

  KDWM_GPIO_Config();
  KDWM_PWM_Config();
}
/*====================================================================================================*/
/*====================================================================================================*/
void KDWM_Loop( void )
{
  uint8_t state = 0;
  uint32_t i = PWM_MIN;

  while(1) {
    
    i = (state) ? (i - 1) : (i + 1);
    if(i == PWM_MAX){ state = 1; }
    if(i == PWM_MIN){ state = 0; }

    TIM_PWM_setDuty(i);

    LED_G_Toggle();
    delay_ms(1);
  }
}
/*====================================================================================================*/
/*====================================================================================================*/
